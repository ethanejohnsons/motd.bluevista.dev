<html>
<head>
    <link rel="stylesheet" href="index.css">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="MOTD" content="OpenAI message of the day generator. Visit each day for a new poem." />
    <title>AI-Powered Poetry</title>
</head>

<body>
    <div class="text">
        <p id="date"></p>
        <hr>
        <p id="motd"></p>
    </div>
    <div class="footer">
        <a href="https://www.buymeacoffee.com/EthanJohnson">
            <img src="icons/bmc.svg" alt="Buy Me a Coffee" width="50px" height="50px"/>
        </a>
        <a href="https://github.com/ethanejohnsons/motd.bluevista.dev">
            <img src="icons/github.svg" alt="Github" width="50px" height="50px"/>
        </a>
    </div>
</body>

<script>
    document.addEventListener('DOMContentLoaded', event => {
        fetch('https://motd.bluevista.dev/motd')
            .then(result => result.json())
            .then(json => {
                document.getElementById("date").innerText = json.date;

                let motd = json.motd.split('');
                let element = document.getElementById("motd");
                let running = null;
                const animate = () => {
                    let next = motd.shift();
                    if (next === '\n') next = "<br />";
                    next ? element.innerHTML += next : clearTimeout(running);
                    running = setTimeout(animate, next === "<br />" ? 250 : 80);
                }
                animate();
            })
            .catch(console.error);
    });
</script>
</html>